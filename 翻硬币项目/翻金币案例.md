# 翻金币案例

```
在 Qt 6.5.0 中，QSound 类已被弃用并移除了。在旧版本的 Qt 中，QSound 类是用于播放音频文件的类，它使用了平台本地的音频 API。但由于它的依赖性和可移植性较低，因此在 Qt 5 中被标记为弃用，最终在 Qt 6.5.0 中被移除。



在Qt6中以及取消了QSound，可以用其他类来替代，比如QSoundEffect。
QSound和QSoundEffect整体来说功能差不多，首先需要在.pro文件中加上multimedia，比如：
QT       += core gui multimedia
QSoundEffect * startSound = new QSoundEffect(this);
tartSound->setSource(QUrl::fromLocalFile("目录"));

但是还有一些差别，比如QSoundEffec是没有setLoop，可以用setLoopCount
startSound->setLoopCount(5);

QSound无限循环是用-1来表示的，setLoopCount不可以，需要用特殊的表示方法：
startSound->setLoopCount(QSoundEffect::Infinite);
需要触发音效的时候，直接->play()就好。

startSound->play();
```



## 需求分析

- 窗口
  - 窗口标题、icon
  - 窗口大小固定
  - 菜单栏 - 退出
- 三个场景
  - 开始
    - 开始按钮：点击之后进入第二个场景（窗口切换）、动画   **自定义按钮实现**
    - 按钮动画：先向下移动再往上动
  - 关卡选择场景
    - 20个按钮：点击后都会进入第三个场景，第三个场景的硬币盘面不同   **自定义按钮实现，paintEvent实现**
  - 游戏场景
    - 4*4的宫格，放置16个硬币，点击一个硬币翻转，同时翻转上下左右4个硬币（如果有的话）
    - 硬币也是按钮，点击后翻转动画   **自定义按钮实现**
    - 胜利条件：全部都是金币的时候游戏胜利，同时播放动画和音效

## 实现操作

### 开始窗口

- 创建一个父类MyMainWindow，作为基类，设定公有的参数
- 创建其他窗口子类继承自MyMainWindow，就可以不用重复设置这些参数
- 背景图
  - paintEvent 直接绘制pixmap
- 开始按钮（自定义按钮）
  - 图片通过paintEvent绘制
  - 动画通过QPropertyAnimation 属性动画区产生过度动画
    - 1位置大小属性发生变化
    - 2给定开始的位置大小属性
    - 3给定结束的位置大小属性
    - 4给定速度，给定动画时长



## 如何发布游戏呢

1. 将程序从Debug环境下改为Release环境下编译

   - 得到`CoinFlip\build\Qt_6_5_3_MinGW_64_bit-Release\release\CoinFlip.exe`

2. 配置运行环境

   1. 找出`Qt\6.5.3\mingw_64\bin\windeployqt.exe`文件的地址

   2. 上**终端**->cd 准备发布的文件夹地址

      `cd \Desktop\res`

   3. 执行**windeployqt.exe文件**

      `Qt\6.5.3\mingw_64\bin\windeployqt.exe .\CoinFlip.exe`

   4. 然后试运行一下，看看哪些dll文件还需要，给复制进来

